# Pixiv å¾Œè™•ç†è…³æœ¬
[Powerful Pixiv Downloader](https://github.com/xuejianxianzun/PixivBatchDownloader) ä¸‹è¼‰å¾Œçš„æª”æ¡ˆè™•ç†è…³æœ¬ã€‚  
è§£æ±º Powerful Pixiv Downloader æœ‰æ¨™ç±¤åˆ†é¡åŠŸèƒ½ï¼ŒæŠŠä¾ç…§ä½œå“åˆ†é¡çš„æª”æ¡ˆå†ç´°åˆ†æˆå„å€‹è§’è‰²ï¼Œé‚„é™„åŠ äº†ä¸€äº›å°åŠŸèƒ½ã€‚

## åŠŸèƒ½
ğŸ“ åˆ†é¡ï¼šå°‡æŒ‡å®šä½œå“ï¼ˆå¦‚ IM BAï¼‰æ ¹æ“šè§’è‰²åˆ†é¡åˆ°ä¸åŒè³‡æ–™å¤¾  
ğŸ”„ åŒæ­¥ï¼šä¸Šå‚³åˆ° NAS  
ğŸ” æœå°‹ï¼šåˆ° danbooru æœå°‹éºå¤±çš„ä½œå“  
ğŸ“Š æª¢è¦–ï¼šä½œå“æ¨™ç±¤æ¯”ä¾‹  

## ä½¿ç”¨æ–¹æ³•
1. å®‰è£å¥—ä»¶ï¼š`pip install -r requirements.txt`ï¼Œ
2. ä½¿ç”¨ Pixiv Downloader ä¸‹è¼‰å®Œæˆå¾Œç›´æ¥åŸ·è¡Œ main  

> [!CAUTION]  
> ä¸‹è¼‰è³‡æ–™å¤¾ä¸­æœªæŒ‡å®šçš„å­è³‡æ–™å¤¾ä¸æœƒè™•ç†ï¼Œä½†æ˜¯**æª”æ¡ˆæœƒå…¨éƒ¨è¢«è¦–ç‚ºå…¶ä»–ä½œå“æ”¾é€² others è³‡æ–™å¤¾**ã€‚

# è¨­å®šèªªæ˜
ç…§é‡è¦ç¨‹åº¦ä¾åºèªªæ˜å„å€‹åŠŸèƒ½å¦‚ä½•è¨­å®šï¼Œæœ€é‡è¦çš„æ˜¯ conf.pyã€‚

### conf.py
1. BASE_PATHS: è¨­å®šæœ¬åœ°ä¸‹è¼‰è³‡æ–™å¤¾ä»¥åŠé ç«¯ä¸Šå‚³è³‡æ–™å¤¾ä½ç½®
2. CATEGORIES: è¨­å®šå¤§åˆ†é¡ï¼Œä¹Ÿå°±æ˜¯ä½ åœ¨ Pixiv Downloader è¨­å®šçš„æ¨™ç±¤ï¼Œæ¯”å¦‚æˆ‘è¨­å®šæˆ *BA,IM,åŸç¥,å…¶ä»–,æµ·å¤¢*  
3. idolmaster_path_child: æŒ‡å®šçš„è³‡æ–™å¤¾åç¨±æœƒè¢«ç§»å‹•åˆ° IM è³‡æ–™å¤¾è™•ç†  
4. bluearchive_tags/idolmaster_tags: è¨­å®šè§’è‰²è³‡æ–™å¤¾åŠå…¶ç¿»è­¯å°æ‡‰ï¼Œå·¦é‚Šæ¨™ç±¤å³é‚Šè³‡æ–™å¤¾åç¨±ï¼ˆç¿»è­¯ï¼‰ï¼Œå¦‚æœè§’è‰²æœ‰å¤šç¨®æ¨™ç±¤å¯ä»¥å…¨éƒ¨ç¶å®šåˆ°åŒä¸€å€‹è³‡æ–™å¤¾ä¸­

### åˆ†é¡
ä¸éœ€ä»»ä½•é¡å¤–æ‰‹å‹•æ“ä½œï¼š
- ç¨‹å¼æœƒæŸ¥è©¢`idolmaster_path_child`é—œéµå­—ä¸¦ä¸”å°‡å°æ‡‰è³‡æ–™å¤¾æ”¾é€²`idolmaster_path`
- æ²’æ­¸é¡çš„è³‡æ–™å¤¾æœƒæ”¾é€²`other_path`ï¼Œå†ä¾æ“šä½œè€…åç¨±åˆ†é¡

> é è¨­æ¨™ç°½åˆ†éš”ç¬¦è™Ÿ","ï¼Œå¯ä»¥æŠŠ `file_name.split(",")` æ”¹æˆä½ çš„åˆ†éš”ç¬¦è™Ÿ

### åŒæ­¥
ä¸éœ€è¦åŒæ­¥æª”æ¡ˆ â¡ï¸ åˆªé™¤ `sync_folders`  
ä¸éœ€è¦ log â¡ï¸ åˆªé™¤ main çš„ `merge_log` ä»¥åŠ post_process çš„ `f'--log-file={log_name}',`   

> rsync æ—¥èªŒæ”¾åœ¨ gen è³‡æ–™å¤¾ã€‚å¦‚è¦èª¿æ•´rsyncåƒæ•¸å¯åƒè€ƒ[é€™è£¡](https://ysc.goalsoft.com.tw/blog-detail.php?target=back&no=49)ã€‚

### æœå°‹éºå¤±çš„ä½œå“ğŸº
æ ¹æ“šä½ è¤‡è£½çš„æ–‡ä»¶å°‹æ‰¾ danbooru æ˜¯å¦æœ‰å°æ‡‰æª”æ¡ˆï¼Œä¸¦å°‡çµæœè¼¸å‡ºåœ¨ gen/pixiv_retrieve.txtã€‚    
ä¸‹è¼‰é é¢ä¸è¦é—œé–‰ï¼Œå³éµæª¢æŸ¥>å³éµclass="beautify_scrollbar logContent">Copy>Copy outerHTMLï¼ŒæŠŠå…§å®¹ä¿å­˜ç‚º gen/pixiv.html

> å¯ä»¥ç”¨ `gallery-dl -i pixiv_retrieve.txt` ä¸€éµä¸‹è¼‰éºå¤±ä½œå“

### æª¢è¦–ä½œå“æ¨™ç±¤æ¯”ä¾‹
åœ¨ gen è³‡æ–™å¤¾ç”Ÿæˆ tag_stats.jpg å’Œ tag_stats.txtï¼Œå¯ä»¥çœ‹ä½ å¹³å¸¸éƒ½çœ‹äº†å•¥ã€‚  
ä¿®æ”¹ main çš„ `process_files` è·¯å¾‘ä»¥ç¬¦åˆä½ çš„æ­¸æª”è·¯å¾‘ã€‚  

> å¯èƒ½éœ€è¦ä¿®æ”¹ `extract_tags` å‡½å¼ä»¥ç¬¦åˆä½ çš„å‘½åè¦å‰‡ã€‚  

# å€‹åˆ¥æª”æ¡ˆåŠŸèƒ½  
åªè¦å€‹åˆ¥åŠŸèƒ½ç›´æ¥æŠŠ main ä¸­ä¸è¦çš„è¨»è§£æ‰æ¯”è¼ƒå¿«ï¼Œä½†æ¯å€‹æª”æ¡ˆä¹Ÿå¯ä»¥ç¨ç«‹é‹è¡Œ

> post_process: æª”æ¡ˆè™•ç†è…³æœ¬ï¼ŒåŒ…å«åˆ†é¡ä¸Šå‚³ä»¥åŠåˆä½µlogã€‚æœå°‹ split å¯ä¿®æ”¹è‡ªå·±çš„åˆ†ç•Œç¬¦è™Ÿ (delimiter)  
> retrieve_artwork: ç›®å‰åªæ‰¾åˆ° danbooru æ”¯æ´ pixiv id æœå°‹ã€‚æ‰¾ä¸åˆ°çš„å¯ä»¥åœ¨å…¶ä»–å¹³å°æ‰‹å‹•æœå°‹  
> tag_stats: ä¾æ“šæª”æ¡ˆåç¨±çµ±è¨ˆæ¨™ç±¤ï¼Œè§£ææ¨™ç±¤æ–¹å¼åœ¨`extract_tags`å®šç¾©ï¼Œä¾ç…§æˆ‘çš„[å‘½åè¦å‰‡](https://xuejianxianzun.github.io/PBDWiki/#/zh-tw/%E4%BE%BF%E6%8D%B7%E5%8A%9F%E8%83%BD?id=%e5%84%b2%e5%ad%98%e5%92%8c%e8%bc%89%e5%85%a5%e5%91%bd%e5%90%8d%e8%a6%8f%e5%89%87)å®Œæˆ `{user}_{id}_{}_{tags_transl_only}`  